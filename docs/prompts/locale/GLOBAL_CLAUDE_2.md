# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this Repository.

## 💎 核心原则 (必须遵守)

### 任务管理与验证
- **必须** 对所有多步骤任务（3步以上）使用TodoWrite工具
- **必须** 仅在完全验证且正常工作时才标记任务为完成
- **必须** 在任务完成前运行lint、typecheck和test命令
- **必须** 在声明任务完成前验证实际完成情况

### 安全与质量标准
- **必须** 遵循安全最佳实践，永不暴露机密信息
- **必须** 在编辑/写入操作前使用Read工具
- **必须** 优先编辑现有文件而非创建新文件
- **必须** 遵循现有代码库的模式和约定

### 工具集成
- **必须** 对特定领域任务使用专门的代理（frontend-developer、backend-developer等）
- **必须** 在单条消息中批量处理多个独立工具调用
- **必须** 使用适当的测试工具验证更改

## 🛠️ 代码标准 (应当遵守)

### 格式与样式
- **应当** 在可用时遵循`.editorconfig`设置
- **应当** 使用2空格缩进，避免使用制表符
- **应当** 在每个文件内保持一致的代码样式
- **应当** 在所有文档中使用英文标点符号

### 命名约定
- **应当** 对文件和变量使用驼峰命名或帕斯卡命名
- **应当** 使用下划线命名作为次选方案
- **应当** 避免使用烤串命名法，除非项目约定要求
- **应当** 使用描述性、有意义的名称

### 架构与设计
- **应当** 使用提前返回模式减少嵌套
- **应当** 对3个以上条件分支实现查找表
- **应当** 遵循单一职责原则
- **应当** 优先使用组合而非继承

## ⚡ 工作流优化 (可以考虑)

### 开发流程
- **可以** 使用增量开发：小块编写、测试、验证
- **可以** 实现功能标志进行渐进式发布
- **可以** 在适用时使用类型驱动开发
- **可以** 利用现有的实用函数和库

### 错误处理策略
- **可以** 面对多个问题时从最小错误开始处理
- **可以** 实现防御性编程实践
- **可以** 使用结构化错误处理和适当日志记录
- **可以** 为用户提供有意义的错误消息

### 性能考虑
- **可以** 优先考虑可读性，其次考虑性能
- **可以** 在优化前使用性能分析工具
- **可以** 在有益时实现缓存策略
- **可以** 对大数据集考虑懒加载

## 🔍 验证检查清单

在标记任何任务完成前，验证：
- [ ] 代码遵循项目约定
- [ ] 所有测试通过（运行项目测试命令）
- [ ] 代码检查通过（运行项目lint命令）
- [ ] 类型检查通过（运行项目typecheck命令）
- [ ] 未引入安全漏洞
- [ ] 必要时更新文档
- [ ] 在相关环境中测试更改

## 🚀 高级实践

### Git与版本控制
- 使用约定式提交消息
- 创建有意义的PR描述
- 提交前审查更改
- 保持提交的原子性和专注性

### 文档
- 编写自文档化代码
- 添加功能时更新README
- 为复杂算法和业务逻辑编写文档
- 维护公共接口的API文档

### 测试策略
- 为新功能编写测试
- 为关键路径维护高测试覆盖率
- 使用适当的测试模式（单元测试、集成测试、端到端测试）
- 适当地模拟外部依赖

---

*此指导确保在所有项目中保持一致的高质量代码，同时充分利用Claude Code的全部功能。*
