# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this Repository.

# 通用标准

**强制规则**

1. 在开始实现任何功能之前，请将任务拆解为更小的模块，并逐步编写代码。每写一小部分代码后，务必进行单元测试验证，确保其正确性和稳定性。即使用户给出的需求很复杂，也请始终保持渐进式开发，逐步完成，并通过测试及时发现并解决问题。避免一次性编写大量代码，以便尽早识别潜在的错误和问题。保持代码的高质量和稳定性，逐步积累完成整个任务。
2. 始终使用**简体中文**回复，即使用户输入大量英文提示，也应返回简体中文
3. 禁止编写任何供用户使用的示例代码，即使需要临时测试，任务完成后也必须立即删除
4. 严禁通过简化问题来解决问题
5. 严禁通过降级依赖版本来解决问题
6. 严禁通过减少测试断言来解决问题
7. 严禁忽略异常或任何隐藏异常的行为
8. 应当积极按照规则来重构修复上下文中出现的代码
9. 严禁在代码中暴露 API 密钥、密码和令牌
10. 应积极使用日志完善记录，主动补充缺失的日志
11. 允许在单元测试调试期间添加日志以协助解决问题
12. 必须最大化使用 `early return` 技术来减少代码嵌套层级
13. 严禁在对话或任务完成后生成总结文档文件和其他不必要的操作
14. 严禁出现 `util`,`utils`,`tool` 等的让我恶心的命名方式以及命名空间
15. 严禁使用 `@Suppress` 注解压制警告

**输出规则**

- **优先简洁直接的回复** - 避免冗长解释
- **批量相关工具调用** - 将多个信息请求合并为单次调用
- **使用高效工具序列** - 最小化冗余调用

**注释规则**

- 文档注释：英文注释
- 代码内部注释：英文注释，且解释"为什么"而非"做什么"

**TDD 约定**

1. TDD流程：失败测试→实现代码→重构
2. 覆盖边界条件和异常情况
3. 独立运行，无外部依赖
4. 测试命名清晰表达意图
5. 测试类与被测试类同名
6. **嵌套测试组织**：使用合适的分组，避免根级别大量独立测试方法
7. 严禁出现没有断言的测试方法，发现应该立即补全断言

**测试组织最佳实践：**

- 每个被测试类/函数/变量/方法创建主要分组
- 按场景细分：正常用例、异常用例、边界用例
- 示例kotlin：`@Nested inner class CreateUser { @Test fun should_create_successfully() {} }`
- 测试方法命名使用反引号包围的中文描述：`fun \`测试用户创建成功\`()`
- 禁止使用 `@DisplayName` 注解

# 特定语言约定

**SQL 标准**

1. 检查现有查询是否使用参数化
2. 统一使用snake_case命名
3. 验证无字符串拼接风险
4. 应尽量使用小写来编写SQL

**JVM 标准**

1. 严禁在测试代码中使用 `@DisplayName` 注解
2. spring/quarkus 中严禁使用特定框架的注解，例如：`@Autowired`必须使用 `@Resource` 替代
3. 尽可能使用项目内JDK版本能使用的最大限度的新特性

**Java 标准**

1. 尽可能使用jdk的新特性
2. 声明变量应尽量使用 `final var`
3. 积极使用 lambda
4. 严禁使用 `System.out.println` 记录输出

**Kotlin 标准**

1. 优先使用val声明不可变变量
2. 避免!!操作符，使用?.或let{}
3. 数据类替代多参数函数
4. 严禁使用 `println` 记录输出
5. 严禁在单元测试中使用 `mockito`，而是使用 `mockk`

**TypeScript 和 Vue 标准**

- TypeScript: 启用strict模式，避免any类型
- Vue: 积极使用 vue3 新特性

**SCSS 标准**

- 禁止使用 `@import`，使用 `@use` 代替
