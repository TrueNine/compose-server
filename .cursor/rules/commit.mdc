---
description:
globs:
alwaysApply: false
---

# Git提交消息生成

执行以下操作：
1. 运行 `git --no-pager diff --cached --stat --patch --color=always` 检查当前暂存改动
2. 运行 `git --no-pager log -n 30 --stat --pretty=format:"%h - %an, %ar : %s%n%b%n%d"` 查看最近提交详细历史
3. 根据用户提供的简要描述和当前暂存区改动，生成符合规范的提交消息
4. 如用户提及要发布版本，则执行以下操作：
   - 运行 `git describe --tags --abbrev=0` 获取最近的标签（即上一个版本）
   - 如果没有历史标签（命令返回错误），则：
     - 提示用户：⚠️ **警告：未发现任何历史标签！请在发布后立即设置版本标签，以确保未来版本变更记录的准确性。**
     - 运行 `git log -n 30 --pretty=format:"%h - %s"` 获取最近30条提交记录
   - 如果有历史标签，则运行 `git log $(git describe --tags --abbrev=0)..HEAD --pretty=format:"%h - %s"` 获取上一个版本到当前的所有提交记录
   - 根据提交记录总结生成符合规范的changelog列表
5. 尝试将生成的提交信息写入当前文件：
   - 如果当前文件是空文件或临时文件，尝试写入生成的提交信息
   - 如果写入失败，则以markdown代码块格式输出提交信息，用户可复制使用

## 输出要求
- 以表情符号开头，采用 `<表情符号> [模块名] <简短描述>` 格式
- 模块名使用英文小写，方括号包围
- 描述用中文，保持简短精确，避免虚词
- 多个改动点使用无序列表，每项带对应表情符号
- 仅当用户明确提供相关issue编号时，才在最后一行添加issue引用
- 版本发布的changelog列表要求：
   - 仅使用一级无序列表（不允许嵌套列表）
   - 每个列表项以表情符号开头，按功能模块和重要性分组
   - 保持简洁明了，突出重要变更
   - 使用中文描述所有变更
   - 如果没有历史标签，在changelog前添加明显的警告提示
- 如果无法写入当前文件，则输出时添加提示："以下是符合规范的提交信息，请复制使用："

## 表情符号速查表

### 🌟 新功能与改进
| ✨ 新功能 | 💄 代码优化 | ⚡️ 性能优化 | 🎨 样式调整 | ♻️ 重构 | 🌈 UI改进 | 🎯 目标完成 | 🚚 重命名/移动 |
| 🔝 提升体验 | 🧩 模块化 | 🌟 亮点功能 | 🎮 游戏化 | 📋 新模板 | 🧿 优化算法 | 🧵 处理线程 | 🦾 智能升级 |

### 🛠️ 修复与维护
| 🐛 发现bug | ✅ 修复bug | 🚑️ 紧急修复 | 🔒️ 安全相关 | 🔧 配置修改 | 🚨 修复警告 | 🩹 小修复 | 🧹 代码清理 |
| 🪓 重度修改 | 🔨 常规修复 | 🪛 微调改进 | 🧰 工具修复 | 🪜 递进改善 | 🧲 修复吸引力 | 🧪 测试修复 | 🔋 电量优化 |

### 📚 文档与依赖
| 📝 文档更新 | 📚 新增文档 | ⬆️ 依赖升级 | ⬇️ 依赖降级 | 📌 依赖锁定 | 📖 文档架构 | 🔍 SEO优化 | 📱 响应式设计 |
| 📔 更新手册 | 📒 开发日志 | 📕 新规范 | 🗒️ 笔记 | 📓 接口文档 | 📑 文档索引 | 🏷️ 标签系统 | 📰 新闻公告 |

### 🧪 测试与发布
| 🎉 全新内容 | 🚀 发布版本 | 🧪 测试相关 | 🔖 版本标签 | 🧿 单元测试 | 🔬 E2E测试 | 📊 分析报告 | 🎭 模拟数据 |
| 🧮 压力测试 | 🔎 安全测试 | 🔗 链接检查 | 🥇 基准测试 | 📶 流量测试 | 🧬 深度测试 | 🚦 测试指标 | 🎪 演示系统 |

### 🔨 开发工具与环境
| 🔨 开发中 | 🔥 删除内容 | 🚧 待优化 | 💩 难以维护 | 🏗️ 架构变更 | 🛠️ 开发工具 | 📦 打包配置 | 🧰 工具函数 |
| 🪄 开发魔法 | 🧙‍♂️ 高级技巧 | 🧭 开发指南 | 💻 IDE配置 | 🧩 插件工具 | 🔮 预测功能 | 🐳 容器化 | ⚙️ 持续优化 |

### 🌐 国际化与部署
| 🌐 国际化 | 🇨🇳 中文支持 | 🚢 部署相关 | 🔌 接口调整 | 🌍 地区适配 | 📡 远程数据 | 🏄 持续集成 | 🕸️ 网络相关 |
| 🇺🇸 英文支持 | 🇯🇵 日文支持 | 🇰🇷 韩文支持 | 🇩🇪 德文支持 | 🛰️ 云端部署 | 🌐 跨域支持 | 🧳 迁移操作 | 🚀 快速启动 |

### 🧠 AI与数据
| 🧠 AI相关 | 🤖 自动化 | 📈 数据处理 | 📉 性能监控 | 🧮 算法优化 | 💾 数据存储 | 🗄️ 缓存策略 | 📓 知识库 |
| 🦾 智能助手 | 📊 数据可视 | 🧿 预测系统 | 🔍 智能搜索 | 🎯 精准推荐 | 🤖 机器学习 | 📡 数据同步 | 🧫 数据清洗 |

### 🔐 安全与权限
| 🔐 权限控制 | 👤 用户验证 | 🛡️ 防护措施 | 🕵️ 隐私保护 | 🔑 密钥管理 | 🛂 访问控制 | 🔏 加密处理 | 🧠 智能分析 |
| 🔒 安全强化 | 🪪 身份认证 | 🧬 生物识别 | 🕶️ 匿名处理 | 🔐 密码策略 | 🛂 授权机制 | 🪝 钓鱼防护 | 🔍 安全扫描 |

### 🎨 UI与用户体验
| 🎨 界面设计 | 🖌️ 样式调整 | 🎭 动画效果 | 👁️ 视觉优化 | 🧠 智能界面 | 👆 手势交互 | 🎯 用户引导 | 🎪 展示优化 |
| 🖼️ 图像处理 | 🎞️ 视频功能 | 📱 移动适配 | 🎪 主题系统 | 💅 美化元素 | 🧩 组件优化 | 🪄 魔法效果 | 🧶 流畅体验 |

### 🚧 版本控制与协作
| 🔖 版本标记 | 🧵 分支管理 | 🧩 合并请求 | 🧪 代码审查 | 🧲 冲突解决 | 🔄 同步代码 | 📋 任务分配 | 🤝 团队协作 |
| 📌 里程碑 | 📊 进度跟踪 | 🔍 代码检视 | 🔀 分支策略 | 🧰 工作流程 | 📥 导入代码 | 📤 导出功能 | 🧑‍💻 协作改进 |

### 🎮 游戏与交互
| 🎮 游戏功能 | 🎯 目标系统 | 🏆 成就机制 | 🎲 随机系统 | 🧩 解谜元素 | 🎭 角色相关 | 🎨 游戏美术 | 🎵 音效音乐 |
| 🎬 剧情内容 | 🏹 战斗系统 | 🛡️ 防御机制 | 💰 经济系统 | 📊 游戏数据 | 🌍 游戏世界 | 🧠 AI对手 | 🎪 特效系统 |

### Issue关联用语
| Fixes | Closes | Related to | Resolves | Part of | Implements | Referenced in | Addresses | Depends on | Blocked by |

## 示例

```
✨ [user] 用户登录功能

- 🔒️ 实现用户名密码验证
- ✨ 支持第三方登录
- 🧪 添加测试用例

Related to #123
```

```
🐛 [api] 数据解析异常

- ✅ 修复JSON解析错误
- 🧪 添加单元测试

Fixes #456
```

```
🌈 [ui] 首页交互优化

- 🎨 调整配色方案
- ⚡️ 优化渲染性能
- 📱 适配移动设备

Part of #789
```

```
🦾 [ai] 智能助手系统优化

- 🧠 改进推荐算法
- 🔍 优化搜索精度
- 📊 添加数据分析图表
- 🎯 提升用户个性化体验

Implements #101
```

```
🚀 [release] 发布v1.2.0版本

## Changelog

- ✨ 新增用户登录与注册功能
- 🔒 增强数据安全性，支持端到端加密
- 🌈 优化首页UI交互体验
- 📱 完善移动端适配，支持各种屏幕尺寸
- ⚡️ 性能优化，页面加载速度提升30%
- 🐛 修复数据解析异常问题
- 🧹 清理冗余代码，减小包体积
- 📝 更新开发文档和使用说明
```

```
🚀 [release] 发布v1.0.0首个版本

⚠️ **警告：未发现任何历史标签！请在发布后立即设置版本标签，以确保未来版本变更记录的准确性。**

## Changelog (基于最近30条提交)

- ✨ 实现用户系统核心功能
- 🔒 建立基础安全架构
- 🌈 完成主界面UI设计与实现
- 📱 添加移动端基础适配
- ⚡️ 构建高性能数据处理模块
- 🏗️ 搭建项目基础架构
- 📝 编写初始文档与API说明
- 🧪 构建自动化测试框架
```

```
🚑️ [release] 发布v1.2.1热修复版本

## Changelog

- 🚑️ 修复生产环境用户无法登录的紧急问题
- 🔒 修复身份验证令牌过期处理逻辑
- 🐛 解决移动端支付接口异常
- 📊 添加异常监控点，提升问题排查效率
- 🔧 调整服务器配置，优化高并发处理
- 📝 更新紧急修复说明文档

Fixes #789, #790, #792
```

```
🎉 [release] 发布v2.0.0重大版本更新

## Changelog

- 🎉 全新架构设计，提升整体性能和可扩展性
- 🧠 集成AI智能推荐系统，个性化用户体验
- 🔝 提升核心业务流程效率，处理速度提升200%
- 🌈 全新UI设计，符合最新设计规范
- 🌐 支持多语言本地化，覆盖10种主要语言
- 📱 全面优化移动端体验，支持手势操作
- 🔒 增强安全系统，支持多因素认证
- 🧩 模块化重构，支持插件扩展
- 📊 引入实时数据分析面板
- 🔌 开放API接口，支持第三方集成
- ♻️ 重构核心代码，提高代码质量和可维护性
- 📝 全新开发者文档和API说明

Part of #500, Implements #501, #502, #503
```
